<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>NYILSRV Dashboard</title>
<style>
body { font-family: Arial; background:#111; color:#eee }
table { width:100%; border-collapse:collapse }
th,td { padding:8px; border:1px solid #333; text-align:center }
.ON { color:#0f0 }
.OFF { color:#f00 }
.WAITING { color:#ff0 }
a { color:#0af; text-decoration:none; padding:4px 8px; border:1px solid #555 }
form { margin-bottom:20px }
</style>
</head>
<body>

<h2>NYILSRV CLIENT LIST</h2>

<form method="post" action="/set_interval">
<label>
<input type="checkbox" name="enabled" {% if rotate_enabled %}checked{% endif %}> Aktifkan Rotasi Otomatis
</label>
<select name="seconds">
<option value="300" {% if interval==300 %}selected{% endif %}>5 Menit</option>
<option value="900" {% if interval==900 %}selected{% endif %}>15 Menit</option>
<option value="1500" {% if interval==1500 %}selected{% endif %}>25 Menit</option>
<option value="3600" {% if interval==3600 %}selected{% endif %}>1 Jam</option>
<option value="7200" {% if interval==7200 %}selected{% endif %}>2 Jam</option>
</select>
<button type="submit">Simpan</button>
</form>

<table>
<tr>
<th>UNIT ID</th>
<th>Hostname</th>
<th>IP</th>
<th>Status</th>
<th>Last Seen</th>
<th>Action</th>
</tr>

{% for uid,c in clients.items() %}
<tr>
<td>{{ uid }}</td>
<td>{{ c.hostname }}</td>
<td>{{ c.ip }}</td>
<td class="{{ c.status }}">{{ c.status }}</td>
<td>{{ (now - c.last_seen)|int }} sec</td>
<td>
<a href="/set/{{ uid }}/ON">ON</a>
<a href="/set/{{ uid }}/OFF">OFF</a>
</td>
</tr>
{% endfor %}
</table>

<p>ACTIVE UNIT: {{ active }}</p>
<p>ROTASI INTERVAL: {{ interval }} detik</p>

</body>
</html>
